# ASIST Testbed Message Topic Hierarchy

## Introduction
This document describes the message topic hierarchy that will be used on the message bus in the ASIST testbed.  
The set of topics describes the "routing" of messages that will be published and subscribed to on the MQTT message bus in ASIST.

## Topics

* observations
  * state - includes location and state (e.g. health) of each player
  * events - this could include a number of different types of events:
    * player - a player performed some action such as flipped a switch or pushed a button or used a tool
      * rubble_collapse - rubble collapse due to trigger event      
      * triage - a triage event
      * lever - a lever event
      * door - a door event
      * freeze - a player has frozen or unfrozen
      * itemequipped - a player equipped an item in their hand
      * itempickup - a player picked up an item
      * jumped - a player jumped
      * itemdrop - a player dropped an item
      * itemuse - a player used an item
      * sprinting - a player sprinted
      * swinging - a play swung their arm
      * woof - the Search and Rescue Dog woof event
      * signal - the Victim Detection Device detects a victim
      * tool_used - The player used a tool with Right Click
      * tool_depleted - A tool has lost all durabiity and broken
      * role_selected - The player selected or changed a role
      * marker_placed - A marker was placed by a player
      * marker_removed - A marker was removed by a player
      * victim_picked_up - A victim was picked up by a player
      * victim_placed - A victim has been placed on the ground by a player
      * rubble_collapse - Player triggered threat switch and rubble has collapsed somewhere
      * rubble_destroyed - A player has used a tool to destroy a rubble block
      * proximity_block_interaction - a player has interacted with a proximity block
    * server
      * victim_evacuated - victim evacuation event

    * competency
      * task - a competency task has been completed
    * training
      * task - a training task has been completed
    * scoreboard - the scoreboard has changed (event)
    * mission - mission events such as START and STOP, these are triggered by the Mission Start button in Minecraft
      * perturbation - perturbation type and state
      * perturbation_rubble_locations - rubble locations and type
      * puzzle_summary - summary of puzzle information presented to each role
      * planning - start and end of planning stages 
    * incidentcommander - Incident Commander questions presented to the player during gameplay
    
    * pause - pause events
  * perspective - includes the perspective/view of each player.  This would be a list of the entities within that player's view
* chat - chat message either between agent and humans or between humans.

* trial
  * start - Create and Start a Trial
  * stop - Stop Trial
* physiological
  * heartrate
  * <other physiological data>
* measures - derived values defined for experimental purposes, calculated from other data within the testbed and published on the message bus 
* control - messages that control the startup, initialization, running and stopping of the testbed.
  * request
    * getTrialInfo - request current Experiment and Trial ID's for running Trial
  * response
    * getTrialInfo - Topic over which control publishes current Experiment and Trial ID's for running Trial
* agent - these are all of the messages that are generated by agent components in the testbed. The purpose of this topic is mostly for agent to agent communication.  The lower level  hierarchy will provide partitioning of the messages into different data types.
  * trust
  * tom (theory of mind) state
  * <other agent generated data>
  * intervention/<agent_name>
    * map  - ClientMap Intervention from Agent
    * chat - Minecraft Chat Interventions from Agent
    * block - Minecraft Block Interventions from Agent
  * prediction/<agent_name> - all predictive agent messages
* experiment - This topic will contain information about the experiment that is being performed.  This will include experiment metadata.
* status - this topic has status of components who want to share what they are doing
  * <component name> - this is the component name that is sending the status/heartbeat.  MQTT allows wildcard topic specifications, so a subscriber can  subscribe to status/*/heartbeats to get all heartbeats or status/elk/heartbeat to get just the elk stack heartbeats.
    * heartbeats - components can send heartbeat message indicating that they are still functioning
    * messsages - this topic contains other messages that testbed components want to publish.  This could be error or warning messages about their status.
